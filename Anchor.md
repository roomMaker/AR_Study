# 앵커 사용하기

## 앵커 작동방식
앵커를 처음 사용할 경우, World Space 와 Pose(포즈 == 위치와 방향)을 검토하는것이 좋다.

    - World Space
        - 카메라와 객체가 배치되는 공간
        - 카메라 및 객체 위치는 월드에서 프레임으로 업데이트된다.
    - Pose
        - 세계 공간에서 객체의 위치와 방향을 나타냅니다.
        - iOS에서는 Transform 이라고도 합니다.

앵커를 만들 때는 현재 프레임의 World Space 추정치를 기준으로 위치와 방향을 설명하는 Pose를 사용한다.

이 앵커에 하나 이상의 객체를 연결한다. 앵커 및 연결된 객체는 현존하는 위치에 표시되며, 앵커 포즈가 각 프레임의 원드 업데이트에 따라 조정되므로 앵커가 객체를 업데이트하고 그에 따라 포즈를 취한다.

여러 객체를 같은 앵커에 연결하여 앵커 포즈가 조정되더라도 이러한 객체가 상대적 위치 및 방향을 유지하도록 할 수 있다.
=> 약간 유니티 부모 자식 개념같기도..?

## 장면에 앵커 사용
장면에 앵커를 사용하려면 코드에서 다음을 실행해야 함
    - Trackable(추적가능 ex) Plane) 또는 ARCore 세션의 컨텍스트에서 앵커를 만든다.
    - 하나 이상의 객체를 앵커에 연결한다.

### 앵커 컨텍스트 선택

이 내용은 본인의 영어 실력과 센스로는 정리가 불가한 내용이라 송구스럽게도 다른 팀원의 내용을 참고할까 하옵나이다...

### 하나 이상의 객체 고정
하나 이상의 객체를 앵커에 연결할 수 있다. 일반적으로 이러한 객체는 다음 중 하나 이상에 해당한다.
    - 객체간에 서로
    - 추적 가능한 요소 (Trackable) (ex. Plane)
    - World Space

## 앵커 가이드라인

### 가능한 경우 앵커 재사용
대부분의 경우 각 객체가 하나의 앵커를 가지는것이 아닌, 주변의 여러 객체에 대해 동일한 앵커를 사용해야 한다.

단, 객체가 추적 가능한 공간이나 World Space 와의 고유한 공간 관계를 유지해야 할 경우 객체에 새로운 앵커를 사용한다.

객체마다 앵커가 있으면 이러한 앵커는 각 프레임에서 추정된 ARCore의 공간에 따라 객체
Pose를 개별적으로 조정한다. 

개별적으로 고정된 객체는 서로를 기준으로 '상대적'으로 이동하거나 회전할 수 있으므로 서로에 맞춰 제자리에 있어야 하는 AR 장면이 깨질 수 있다.
=> 개발자의 의도와 다른 위치값을 가질 수 있다는 말인것 같음.

### 객체를 앵커에 가까이 유지
객체를 고정할 때는 사용 중인 앵커에 가까이 있어야 한다고 한다. 

ARCore의 업데이트로 인해 예기치 않은 회전이 발생하지 않도록 객체는 앵커에서 8M 이상 떨어지게 배치하지 않도록 해야한다고 한다.

### 사용하지 않는 앵커 분리
앱의 성능을 높이기 위해 더 이상 필요하지 않은 앵커를 분리해야 한다.

앱에서 모든 Trackable의 CPU 비용이 발생하며, ARCore에선 앵커가 연결된 Trackable을 해제하지 않는다.
=> 위치나 화면에 관계없이 Trackable 객체는 CPU 비용이 발생하는데, 사용하지 않는 앵커에 있는 Trackable이 CPU 비용을 발생시킬 수 있으므로 사용하지 않는 앵커는 분리하라는 이야기인듯 하다.

## 앵커의 유형
앵커 유형은 로컬에서 전역에 이르기까지 유효한 범위에 따라 구분된다.

    - 로컬 앵커는 로컬에 앱과 함께 저장되며 앱의 해당 인스턴스에서만 유효하다. 사용자는 앵커를 배치한 위치에 실제로 있어야 한다.

    - Cloud 앵커는 Google Cloud에 저장되며 앱 인스턴스 간에 공유될 수 있습다. 사용자는 물리적으로 앵커를 배치한 위치에 있어야 한다.

    - 지리정보 앵커는 측지 위도, 경도, 고도는 물론 Google의 위치 파악 시스템 (VPS) 데이터도 기반으로 하여 세계 각지의 정확한 위치를 제공한다. 이러한 앵커는 앱 인스턴스 간에 공유될 수 있다. 앱이 인터넷에 연결되어 있고 VPS를 사용할 수 있는 한 사용자는 원격 위치의 앵커를 배치할 수 있다.